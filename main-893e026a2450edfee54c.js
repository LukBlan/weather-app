(()=>{"use strict";const e={};function t(t,n){void 0===e[t]&&(e[t]=[]),e[t].push(n)}function n(t,n){e[t].forEach((e=>e(n)))}const a=document.querySelector(".search-button"),r=document.getElementById("city-input");function c(e,t){const a=t||r.value;0!==a.length&&n("makeWeatherApiCall",a)}function o(e){n("newWeatherInfo",e)}r.addEventListener("keyup",(function(e){"Enter"===e.key&&c()})),a.addEventListener("click",c),t("makeWeatherApiCall",(function(e){(async function(e){const t=`https://api.weatherapi.com/v1/forecast.json?KEY=0b3eed6dfdae45bcbad10452232309&q=${e}&days=3&hour=12}`,n=await fetch(t,{mode:"cors"}),a=await n.text();if(!n.ok)throw new Error("City Not Found");return JSON.parse(a)})(e).then(o).catch((()=>{console.log("error")}))}));class i{constructor(){this.forecastInfo=[]}setInfo(e){this.info=e}setExtraInfo(e){this.extraInfo=e}addNewForecastInfo(e){this.forecastInfo.push(e)}}class s{constructor(){this.cityWeatherObject=new i}build(e){return this.#e(e),this.#t(e.forecast),this.#n(e),this.cityWeatherObject}#t(e){const t=this.#a(e.forecastday[0]),n=this.#a(e.forecastday[1]),a=this.#a(e.forecastday[2]);this.cityWeatherObject.addNewForecastInfo(t),this.cityWeatherObject.addNewForecastInfo(n),this.cityWeatherObject.addNewForecastInfo(a),console.log(this.cityWeatherObject)}#a(e){const t={};return t.maxtemp_c=e.day.maxtemp_c,t.maxtemp_f=e.day.maxtemp_f,t.mintemp_c=e.day.mintemp_c,t.mintemp_f=e.day.mintemp_f,t.text=e.day.condition.text,t.icon=e.day.condition.icon,t.date=e.date,t}#e(e){const t={},n=this.#r(e.location),a=this.#c(e.current);t.location=n,t.temperature=a,this.cityWeatherObject.setInfo(t)}#r(e){const t={};return t.name=e.name,t.region=e.region,t.country=e.country,t}#c(e){const t={};return t.temp_c=e.temp_c,t.temp_f=e.temp_f,t.condition=e.condition.text,t.icon=e.condition.icon,t}#n(e){const t={};t.wind_mph=e.current.wind_mph,t.wind_dir=e.current.wind_dir,t.precip_mm=e.current.precip_mm,t.humidity=e.current.humidity,t.vis_km=e.current.vis_km,t.pressure_mb=e.current.pressure_mb,this.cityWeatherObject.setExtraInfo(t)}}class d{constructor(e){const t=e.split("-");this.dateRecived=new Date(t[0],t[1]-1,t[2]),this.dateRecived.setHours(0,0,0,0)}checkDate(){const e=new Date,t=new Date,n=new Date;let a="";return e.setHours(0,0,0,0),t.setHours(0,0,0,0),n.setHours(0,0,0,0),t.setDate(e.getDate()+1),n.setDate(t.getDate()+1),a=this.dateRecived.toString()===e.toString()?"Today":this.dateRecived.toString()===t.toString()?"Tomorrow":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][n.getDay()],a}}class u{build(e){const t=document.createElement("div"),n=this.#o(e.info.location),a=this.#i(e.info.temperature),r=this.#s(e.forecastInfo);return t.classList.add("info-section"),t.append(n),t.append(a),t.append(r),t}#i(e){const t=document.createElement("p");return t.innerText=e.temp_c,t}#o(e){const t=document.createElement("div"),n=document.createElement("h2"),a=document.createElement("p"),r=document.createElement("p");return n.innerText=e.name,n.classList.add("city-name"),a.innerText=e.region,r.innerText=e.country,t.append(n),t.append(a),t.append(r),t}#s(e){const t=document.createElement("div");return t.classList.add("forecast-card-list"),e.forEach((e=>{const n=function(e){const t=document.createElement("div"),n=function(e){const t=document.createElement("p"),n=new d(e);return t.innerText=n.checkDate(),t}(e.date),a=function(e){const t=document.createElement("img");return t.classList.add("forecast-image"),t.src=e.icon,t}(e);return t.classList.add("forecast-card"),t.append(n),t.append(a),t}(e);t.append(n)})),t}}class p{build(e){const t=document.createElement("div"),n=this.#d(e,"Wind","wind_mph","km/hr"),a=this.#d(e,"Wind Direction","wind_dir",""),r=this.#d(e,"Pressure","pressure_mb","hPa"),c=this.#d(e,"Precipitation","precip_mm","%"),o=this.#d(e,"Humidity","humidity","%"),i=this.#d(e,"Visibility","vis_km","km");return t.classList.add("extra-info-section"),t.append(n),t.append(a),t.append(r),t.append(c),t.append(o),t.append(i),t}#d(e,t,n,a){const r=document.createElement("div"),c=document.createElement("p"),o=document.createElement("p");return c.innerText=t,o.innerText=e[n]+" "+a,r.append(c),r.append(o),r}}class m{build(e){const t=document.createElement("div"),n=new u,a=new p,r=n.build(e),c=a.build(e.extraInfo);return t.classList.add("weather-wrapper"),t.append(r),t.append(c),t}}const h=document.querySelector(".city-weather-display"),l=new class{constructor(){this.loader=function(){const e=document.createElement("div");return e.classList.add("loader"),e}()}showInScreen(e){e.append(this.loader)}getOutScreen(e){e.removeChild(this.loader)}};let f=null;t("makeWeatherApiCall",(function(){h.innerHTML="",l.showInScreen(h)})),t("newWeatherInfo",(function(e){console.log(e);const t=new s,n=new m,a=t.build(e),r=n.build(a);f=a,l.getOutScreen(h),h.append(r)})),c(0,"London")})();