(()=>{"use strict";const e={};function t(t,n){void 0===e[t]&&(e[t]=[]),e[t].push(n)}function n(t,n){e[t].forEach((e=>e(n)))}const r=document.querySelector(".search-button"),c=document.getElementById("city-input");function i(e,t){const r=t||c.value;console.log(r),0!==r.length&&n("makeWeatherApiCall",r)}function o(e){n("newWeatherInfo",e)}c.addEventListener("keyup",(function(e){"Enter"===e.key&&i()})),r.addEventListener("click",i),t("makeWeatherApiCall",(function(e){(async function(e){const t=`https://api.weatherapi.com/v1/current.json?KEY=0b3eed6dfdae45bcbad10452232309&q=${e}}`,n=await fetch(t,{mode:"cors"});if(!n.ok)throw new Error("City Not Found");return n.json()})(e).then(o).catch((()=>{console.log("error")}))}));class a{build(e){const t=document.createElement("div"),n=this.#e(e.location);return t.classList.add("info-section"),t.append(n),console.log(e),t}#e(e){const t=document.createElement("div"),n=document.createElement("h2"),r=document.createElement("p"),c=document.createElement("p");return n.innerText=e.name,r.innerText=e.region,c.innerText=e.country,t.append(n),t.append(r),t.append(c),t}}class s{setInfo(e){this.info=e}setExtraInfo(e){this.extraInfo=e}}class d{constructor(){this.cityWeatherObject=new s}build(e){return this.#t(e),this.#n(e),this.cityWeatherObject}#t(e){const t={},n=this.#r(e.location),r=this.#c(e.current);t.location=n,t.temperature=r,this.cityWeatherObject.setInfo(t)}#r(e){const t={};return t.name=e.name,t.region=e.region,t.country=e.country,t}#c(e){const t={};return t.temp_c=e.temp_c,t.temp_f=e.temp_f,t.condition=e.condition.text,t.icon=e.condition.icon,t}#n(e){const t={};t.wind_mph=e.current.wind_mph,t.wind_dir=e.current.wind_dir,t.precip_mm=e.current.precip_mm,t.humidity=e.current.humidity,t.vis_km=e.current.vis_km,t.pressure_mb=e.current.pressure_mb,this.cityWeatherObject.setExtraInfo(t)}}class u{build(e){const t=document.createElement("div"),n=this.#i(e,"Wind","wind_mph","km/hr"),r=this.#i(e,"Wind Direction","wind_dir",""),c=this.#i(e,"Pressure","pressure_mb","hPa"),i=this.#i(e,"Precipitation","precip_mm","%"),o=this.#i(e,"Humidity","humidity","%"),a=this.#i(e,"Visibility","vis_km","km");return t.classList.add("extra-info-section"),t.append(n),t.append(r),t.append(c),t.append(i),t.append(o),t.append(a),t}#i(e,t,n,r){const c=document.createElement("div"),i=document.createElement("p"),o=document.createElement("p");return i.innerText=t,o.innerText=e[n]+" "+r,c.append(i),c.append(o),c}}const p=document.querySelector(".city-weather-display"),m=new class{constructor(){this.loader=function(){const e=document.createElement("div");return e.classList.add("loader"),e}()}showInScreen(e){e.append(this.loader)}getOutScreen(e){e.removeChild(this.loader)}};let h=null;t("makeWeatherApiCall",(function(){p.innerHTML="",m.showInScreen(p)})),t("newWeatherInfo",(function(e){const t=new d,n=new a,r=new u,c=t.build(e),i=n.build(c.info),o=r.build(c.extraInfo);console.log(c),m.getOutScreen(p),h=c,function(e,t){p.append(e),p.append(t)}(i,o)})),i(0,"London")})();