(()=>{"use strict";const e={};function t(t,n){void 0===e[t]&&(e[t]=[]),e[t].push(n)}function n(t,n){e[t].forEach((e=>e(n)))}const o=document.querySelector(".search-button"),c=document.getElementById("city-input");function r(e,t){const o=t||c.value;console.log(o),0!==o.length&&n("makeWeatherApiCall",o)}function i(e){n("newWeatherInfo",e)}c.addEventListener("keyup",(function(e){"Enter"===e.key&&r()})),o.addEventListener("click",r),t("makeWeatherApiCall",(function(e){(async function(e){const t=`https://api.weatherapi.com/v1/current.json?KEY=0b3eed6dfdae45bcbad10452232309&q=${e}}`,n=await fetch(t,{mode:"cors"});if(!n.ok)throw new Error("City Not Found");return n.json()})(e).then(i).catch((()=>{console.log("error")}))}));class a{build(e){const t=document.createElement("div"),n=document.createElement("div"),o=this.#e(e.location);return t.classList.add("info-section"),n.classList.add("extra-info-section"),t.append(o),console.log(e),{info:t,extraInfo:n}}#e(e){const t=document.createElement("div"),n=document.createElement("h2"),o=document.createElement("p"),c=document.createElement("p");return n.innerText=e.name,o.innerText=e.region,c.innerText=e.country,t.append(n),t.append(o),t.append(c),t}}class s{setLocation(e){this.location=e}setTemperature(e){this.temperature=e}}class u{constructor(){this.cityWeatherObject=new s}build(e){return this.#t(e.location),this.#n(e.current),this.cityWeatherObject}#t(e){const t={};t.name=e.name,t.region=e.region,t.country=e.country,this.cityWeatherObject.setLocation(t)}#n(e){const t={};t.celcius=e.temp_c,t.fahrenheit=e.temp_f,t.condition=e.condition.text,t.icon=e.condition.icon,this.cityWeatherObject.setTemperature(t)}}const d=document.querySelector(".city-weather-display"),l=new class{constructor(){this.loader=function(){const e=document.createElement("div");return e.classList.add("loader"),e}()}showInScreen(e){e.append(this.loader)}getOutScreen(e){e.removeChild(this.loader)}};let h=null;t("makeWeatherApiCall",(function(){d.innerHTML="",l.showInScreen(d)})),t("newWeatherInfo",(function(e){const t=new u,n=new a,o=t.build(e),c=n.build(o);l.getOutScreen(d),h=o,function(e){d.append(e.info),d.append(e.extraInfo)}(c)})),r(0,"London")})();